# ============================================================================
# ON ACTIONS - MONTHLY EVENT SYSTEM
# ============================================================================
# This file hooks into the monthly country pulse to trigger LPR events.
# 
# MONTHLY BUILDER EVENTS:
# - Builder events use MTTH system for balanced timing
# - This provides opportunities to accumulate LPR points regularly
#
# THRESHOLD CHECKS:
# - Monthly check if any LPR variable has reached threshold for finisher events
# - Other events (binary, big finisher, threshold) check monthly with adjusted
#   probabilities
# ============================================================================

# Fires every month for each country
TRY_INJECT:on_monthly_pulse_country = {
	on_actions = {
		lpr_on_monthly_pulse_country
	}
}

lpr_on_monthly_pulse_country = {
	# Random events for monthly builder and binary events
	random_events = {
		# Builder event - 25% chance monthly
		25 = lpr_events.1

		# Binary events - 10% chance each when conditions met
		10 = lpr_events.2
		10 = lpr_events.3
		10 = lpr_events.4

		# Big finisher binary events - 8% chance each when conditions met
		8 = lpr_events.11
		8 = lpr_events.12
		8 = lpr_events.13

		# Spent threshold events - 7% chance each when conditions met
		7 = lpr_events.21
		7 = lpr_events.24
		7 = lpr_events.27
	}

	# Check for finisher events every month (triggers if conditions met)
	# This evaluates if any LPR variable (Liberty, Progress, or Revolution)
	# has reached the threshold of 12 points, triggering a finisher event

	effect = {
		lpr_check_finisher_events = yes
	}
}

# ============================================================================
# LAW ENACTMENT POLITICS EVENTS
# ============================================================================
# These events trigger during law enactment debates, offering players the
# chance to spend LPR points for political advantages during legislation.
# ============================================================================

# Trigger politics events during law enactment debates
on_law_checkpoint_debate = {
	on_actions = {
		lpr_on_law_checkpoint_debate
	}
}

lpr_on_law_checkpoint_debate = {
	random_events = {
		55 = 0
		15 = lpr_events.30
		15 = lpr_events.31
		15 = lpr_events.32
	}
}