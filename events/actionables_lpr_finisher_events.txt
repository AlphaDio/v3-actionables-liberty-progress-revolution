namespace = lpr_events

# ============================================================================
# FINISHER EVENTS
# ============================================================================
# These events trigger when a country accumulates 12 points in any LPR category
# (Liberty, Progress, or Revolution). This typically happens after 4 monthly
# builder events where the player consistently chooses the same path.
# 
# The finisher events provide significant rewards but also reduce the accumulated
# points, creating a cycle of building up and cashing out.
# ============================================================================

# Finisher event - triggers when any LPR variable reaches 12 points
# This represents a quarterly assessment where accumulated choices manifest
lpr_events.finisher.1 = {
    type = country_event
    placement = root

    title = lpr_events.finisher.1.t
    desc = lpr_events.finisher.1.d
    flavor = lpr_events.finisher.1.f

    event_image = {
        video = "unspecific_politicians_arguing"
    }

    on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
    icon = "gfx/interface/icons/event_icons/event_scales.dds"

    duration = 3

    # Option A: Financial Stability Path
    # Rewards: Large treasury boost (50,000 gold)
    # Costs: Reduces Liberty points (local) and Independence (global) by 10
    # This path favors economic stability over political change
    option = {
        name = lpr_events.finisher.1.a
        add_treasury = 50000
        change_variable = {
            name = actionables_lpr_liberty
            add = -10
        }
        change_variable = {
            name = actionables_lpr_liberty_spent
            add = 10
        }
        change_global_variable = {
            name = actionables_lpr_independence
            add = -10
        }
    }

    # Option B: National Unity Path
    # Rewards: Converts large radicals to loyalists (improves stability)
    # Costs: Reduces Progress points (local) and Innovation (global) by 10
    # This path focuses on social cohesion and reducing radicalism
    option = {
        name = lpr_events.finisher.1.b
        add_loyalists = {
            value = large_radicals
        }
        change_variable = {
            name = actionables_lpr_progress
            add = -10
        }
        change_variable = {
            name = actionables_lpr_progress_spent
            add = 10
        }
        change_global_variable = {
            name = actionables_lpr_innovation
            add = -10
        }
    }

    # Option C: Population Expansion Path
    # Rewards: Creates 50,000 new pops in a random state (matching capital culture/religion)
    # Costs: Reduces Revolution points (local) and Turmoil (global) by 10
    # This path increases population, which can boost economic output
    option = {
        name = lpr_events.finisher.1.c
        random_scope_state = {
            create_pop = {
                culture = root.capital.state_region.cultures:0
                religion = root.capital.state_region.religions:0
                size = 50000
            }
        }
        change_variable = {
            name = actionables_lpr_revolution
            add = -10
        }
        change_variable = {
            name = actionables_lpr_revolution_spent
            add = 10
        }
        change_global_variable = {
            name = actionables_lpr_turmoil
            add = -10
        }
    }
}
