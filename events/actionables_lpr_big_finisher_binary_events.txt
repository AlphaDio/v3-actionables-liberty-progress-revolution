namespace = lpr_events

# ============================================================================
# BIG FINISHER BINARY EVENTS
# ============================================================================
# These events trigger when LPR variables reach 20 or more points.
# Each event offers a binary choice:
# - Consume the path: Set variable to 0 for a big boost
# - Redirect the path: Increase another LPR variable with small bonus + small drawback
#
# These events represent major turning points where accumulated effort can
# either be cashed out for maximum benefit or redirected toward another goal.
# ============================================================================

# Big Finisher Binary event for Liberty - triggers when Liberty >= 20
lpr_events.11 = {
    type = country_event
    placement = root

    trigger = {
        var:actionables_lpr_liberty >= 20
    }

    title = lpr_events.11.t
    desc = lpr_events.11.d
    flavor = lpr_events.11.f

    event_image = {
        video = "unspecific_world_fair"
    }

    on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
    icon = "gfx/interface/icons/event_icons/event_scales.dds"

    duration = 10

    # Option A: Consume Liberty Path for Big Boost
    # Rewards: Large treasury boost (50,000 gold) + large loyalist increase
    # Cost: Sets Liberty to 0, consuming all accumulated progress
    option = {
        name = lpr_events.11.a
        add_treasury = 50000
        add_loyalists = {
            value = lpr_large_radicals
        }
        change_variable = {
            name = actionables_lpr_liberty_spent
            add = var:actionables_lpr_liberty
        }
        set_variable = {
            name = actionables_lpr_liberty
            value = 0
        }
    }

    # Option B: Redirect Liberty to Progress
    # Rewards: Small bonus (construction boost for 60 days) + 5 Progress points
    # Drawback: Small treasury cost (10,000 gold) + keeps Liberty at current level
    option = {
        name = lpr_events.11.b
        add_treasury = -10000
        add_modifier = {
            name = lpr_construction_boost
            days = 60
        }
        change_variable = {
            name = actionables_lpr_progress
            add = 5
        }
    }
}

# Big Finisher Binary event for Progress - triggers when Progress >= 20
lpr_events.12 = {
    type = country_event
    placement = root

    trigger = {
        var:actionables_lpr_progress >= 20
    }

    title = lpr_events.12.t
    desc = lpr_events.12.d
    flavor = lpr_events.12.f

    event_image = {
        video = "unspecific_world_fair"
    }

    on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
    icon = "gfx/interface/icons/event_icons/event_scales.dds"

    duration = 10

    # Option A: Consume Progress Path for Big Boost
    # Rewards: Massive construction boost (5x speed for 90 days) + 35,000 gold
    # Cost: Sets Progress to 0, consuming all accumulated progress
    option = {
        name = lpr_events.12.a
        add_treasury = 35000
        add_modifier = {
            name = lpr_massive_construction_boost
            days = 90
        }
        change_variable = {
            name = actionables_lpr_progress_spent
            add = var:actionables_lpr_progress
        }
        set_variable = {
            name = actionables_lpr_progress
            value = 0
        }
    }

    # Option B: Redirect Progress to Revolution
    # Rewards: Small bonus (tech spread boost for 60 days) + 5 Revolution points
    # Drawback: 3-month radical increase + keeps Progress at current level
    option = {
        name = lpr_events.12.b
        add_modifier = {
            name = lpr_small_radical_increase
            months = 3
        }
        add_modifier = {
            name = lpr_society_tech_spread_boost
            days = 60
        }
        change_variable = {
            name = actionables_lpr_revolution
            add = 5
        }
    }
}

# Big Finisher Binary event for Revolution - triggers when Revolution >= 20
lpr_events.13 = {
    type = country_event
    placement = root

    trigger = {
        var:actionables_lpr_revolution >= 20
    }

    title = lpr_events.13.t
    desc = lpr_events.13.d
    flavor = lpr_events.13.f

    event_image = {
        video = "unspecific_world_fair"
    }

    on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
    icon = "gfx/interface/icons/event_icons/event_scales.dds"

    duration = 10

    # Option A: Consume Revolution Path for Big Boost
    # Rewards: Massive population boost (100,000 pops) + tech spread boost (90 days)
    # Cost: Sets Revolution to 0, consuming all accumulated progress
    option = {
        name = lpr_events.13.a
        random_scope_state = {
            create_pop = {
                culture = root.capital.state_region.cultures:0
                religion = root.capital.state_region.religions:0
                size = 100000
            }
        }
        add_modifier = {
            name = lpr_society_tech_spread_boost
            days = 90
        }
        change_variable = {
            name = actionables_lpr_revolution_spent
            add = var:actionables_lpr_revolution
        }
        set_variable = {
            name = actionables_lpr_revolution
            value = 0
        }
    }

    # Option B: Redirect Revolution to Liberty
    # Rewards: Small bonus (10,000 gold) + 5 Liberty points
    # Drawback: Small population loss (10,000) + keeps Revolution at current level
    option = {
        name = lpr_events.13.b
        add_treasury = 10000
        random_scope_state = {
            limit = {
                any_scope_pop = {
                    size > 15000
                }
            }
            random_scope_pop = {
                limit = {
                    size > 15000
                }
                change_pop_size = -10000
            }
        }
        change_variable = {
            name = actionables_lpr_liberty
            add = 5
        }
    }
}
